//=============================================================================
//
//	[ s2dbase_arg.h ]
//
//	the s2d local platform independent implement of CRT arguments.
//
//	PLATFORM INDEPENDENT!!!平台无关
//
//	Copyright (c) 2006-2009, DingooGames. All rights reserved.
//
//=============================================================================


#ifndef __S2DBASE_ARG_H__
#define	__S2DBASE_ARG_H__

//--------------------------------------------------------------------------------------------------------
#include "s2dbase_common.h"
//--------------------------------------------------------------------------------------------------------
namespace s2d {
//--------------------------------------------------------------------------------------------------------
#ifndef _VA_LIST_DEFINED
typedef s8*		va_list;
#endif
//--------------------------------------------------------------------------------------------------------
}
//--------------------------------------------------------------------------------------------------------
#define VA_LIST_DEFINED
//--------------------------------------------------------------------------------------------------------
#define _ADDRESSOF(v)		( &reinterpret_cast<const char &>(v) )
//--------------------------------------------------------------------------------------------------------
#ifndef _SLOTSIZEOF
#define _SLOTSIZEOF(t)		( sizeof(t) )
#endif
//--------------------------------------------------------------------------------------------------------
#define _INTSIZEOF(n)		( (sizeof(n) + sizeof(int) - 1) & ~(sizeof(int) - 1) )
//--------------------------------------------------------------------------------------------------------
#define va_start(ap,v)		( ap = (va_list)_ADDRESSOF(v) + _INTSIZEOF(v) )
#define va_arg(ap,t)		( *(t *)((ap += _INTSIZEOF(t)) - _INTSIZEOF(t)) )
#define va_end(ap)			( ap = (va_list)0 )
//--------------------------------------------------------------------------------------------------------

#endif//__S2DBASE_ARG_H__
